{"data":{"docBySlug":{"html":"<h1 id=\"performance\"><a href=\"#performance\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Performance</h1>\n<blockquote>\n<p>This article is a work in progress and may contain incorrect information.</p>\n</blockquote>\n<p>The code vector and matrix operations in math.gl are based on gl-matrix which makes a credible claim at being the most performant 3D math library available for JavaScript. However, the relentless focus on performance means that gl-matrix offers a procedural API, which doesn't always provide the programming experience. Also there are no error checks which is great in production code.</p>\n<p>Since math.gl uses gl-matrix functions under the hood, math.gl's performance can be very close to gl-matrix, but the additional conveniences in math.gl (e.g. using classes instead of a procedural API, debug checks etc) do come with an overhead, that can vary from undetectable to signficant. Understanding this overhead can help you write more performant code and work around most performance issues.</p>\n<p>It is worth noting that math.gl has been designed so that in cases where javascript math calculations are performance critical, you can always use gl-matrix directly. See (./docs/get-started/using-with-gl-matrix.md). Essentially, since all math.gl classes inherit from <code class=\"language-text\">Array</code>s they work directly as arguments to gl-matrix functions, no copying necessary.</p>\n<h2 id=\"disabling-debug-checks\"><a href=\"#disabling-debug-checks\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Disabling Debug Checks</h2>\n<p>In debug mode, math.gl does error checks after every operation. It has a modest impact. Verifying that error checks are not being enable could be a simple first step.</p>\n<h2 id=\"minimizing-object-creation\"><a href=\"#minimizing-object-creation\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Minimizing Object Creation</h2>\n<p>The typical performance issue in math.gl is in object creation. Creating new <code class=\"language-text\">Vector</code> and <code class=\"language-text\">Matrix</code> instances is the slowest part of math.gl. Therefore, reusing objects where possible is an important technique to optimize performance.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">...</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">const</span> v <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Vector3</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>vs.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const tempVector = new Vector3();\nfor (...) {\n\tv.set(...);\n}</code></pre></div>\n<p>Note that some methods, like <code class=\"language-text\">Matrix4.transformVector</code>, allocate new objects as return values. By providing an optional <code class=\"language-text\">target</code> argument you can prevent this allocation and reuse an object you have already allocated. This technique is borrowed the THREE.js math library where it is a commonly availble optimization.</p>\n<h2 id=\"remarks\"><a href=\"#remarks\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Remarks</h2>\n<ul>\n<li><strong>SIMD support</strong> - A nice performance related feature that gl-matrix offers is optional SIMD support, which can potentially further speed up math operations. However, due to this feature mainly being available in a single browser (Firefox), and the amount of extra code (directly affecing math.gl library size) that would be involved in supporting it, SIMD support is not included in math.gl. If browser support increases, math.gl woulc likely start including SIMD support for a few selected <code class=\"language-text\">Matrix4</code> operations.</li>\n</ul>","timeToRead":2,"excerpt":"Performance This article is a work in progress and may contain incorrect information. The code vector and matrix operations in math.gl areâ€¦","frontmatter":{"title":"Performance","cover":"cover","category":"docs","tags":["default"]}}},"pageContext":{"relativeLinks":{"../../roadmap.md":"/docs/roadmap","docs/roadmap.md":"/docs/roadmap","../../roadmap":"/docs/roadmap","docs/roadmap":"/docs/roadmap","../../README.md":"/docs","docs/README.md":"/docs","../..":"/docs","docs":"/docs","../../whats-new.md":"/docs/whats-new","docs/whats-new.md":"/docs/whats-new","../../whats-new":"/docs/whats-new","docs/whats-new":"/docs/whats-new","../../upgrade-guide.md":"/docs/upgrade-guide","docs/upgrade-guide.md":"/docs/upgrade-guide","../../upgrade-guide":"/docs/upgrade-guide","docs/upgrade-guide":"/docs/upgrade-guide","../../get-started/README.MD":"/docs/get-started/README.MD","docs/get-started/README.MD":"/docs/get-started/README.MD","../../get-started/using-with-gl-matrix.md":"/docs/get-started/using-with-gl-matrix","docs/get-started/using-with-gl-matrix.md":"/docs/get-started/using-with-gl-matrix","../../get-started/using-with-gl-matrix":"/docs/get-started/using-with-gl-matrix","docs/get-started/using-with-gl-matrix":"/docs/get-started/using-with-gl-matrix","../../wip/using-vectors.md":"/docs/wip/using-vectors","docs/wip/using-vectors.md":"/docs/wip/using-vectors","../../wip/using-vectors":"/docs/wip/using-vectors","docs/wip/using-vectors":"/docs/wip/using-vectors","../../get-started/using-with-three-js.md":"/docs/get-started/using-with-three-js","docs/get-started/using-with-three-js.md":"/docs/get-started/using-with-three-js","../../get-started/using-with-three-js":"/docs/get-started/using-with-three-js","docs/get-started/using-with-three-js":"/docs/get-started/using-with-three-js","../coordinate-systems.md":"/docs/developer-guide/coordinate-systems","docs/developer-guide/coordinate-systems.md":"/docs/developer-guide/coordinate-systems","../coordinate-systems":"/docs/developer-guide/coordinate-systems","docs/developer-guide/coordinate-systems":"/docs/developer-guide/coordinate-systems","../debugging.md":"/docs/developer-guide/debugging","docs/developer-guide/debugging.md":"/docs/developer-guide/debugging","../debugging":"/docs/developer-guide/debugging","docs/developer-guide/debugging":"/docs/developer-guide/debugging","":"/docs/developer-guide/performance","docs/developer-guide/performance.md":"/docs/developer-guide/performance","docs/developer-guide/performance":"/docs/developer-guide/performance","../homogenous-coordinates.md":"/docs/developer-guide/homogenous-coordinates","docs/developer-guide/homogenous-coordinates.md":"/docs/developer-guide/homogenous-coordinates","../homogenous-coordinates":"/docs/developer-guide/homogenous-coordinates","docs/developer-guide/homogenous-coordinates":"/docs/developer-guide/homogenous-coordinates","../using-transformations.md":"/docs/developer-guide/using-transformations","docs/developer-guide/using-transformations.md":"/docs/developer-guide/using-transformations","../using-transformations":"/docs/developer-guide/using-transformations","docs/developer-guide/using-transformations":"/docs/developer-guide/using-transformations","../view-and-projection.md":"/docs/developer-guide/view-and-projection","docs/developer-guide/view-and-projection.md":"/docs/developer-guide/view-and-projection","../view-and-projection":"/docs/developer-guide/view-and-projection","docs/developer-guide/view-and-projection":"/docs/developer-guide/view-and-projection","../../api-reference/euler.md":"/docs/api-reference/euler","docs/api-reference/euler.md":"/docs/api-reference/euler","../../api-reference/euler":"/docs/api-reference/euler","docs/api-reference/euler":"/docs/api-reference/euler","../../api-reference/pose.md":"/docs/api-reference/pose","docs/api-reference/pose.md":"/docs/api-reference/pose","../../api-reference/pose":"/docs/api-reference/pose","docs/api-reference/pose":"/docs/api-reference/pose","../../api-reference/quaternion.md":"/docs/api-reference/quaternion","docs/api-reference/quaternion.md":"/docs/api-reference/quaternion","../../api-reference/quaternion":"/docs/api-reference/quaternion","docs/api-reference/quaternion":"/docs/api-reference/quaternion","../../api-reference/utilities.md":"/docs/api-reference/utilities","docs/api-reference/utilities.md":"/docs/api-reference/utilities","../../api-reference/utilities":"/docs/api-reference/utilities","docs/api-reference/utilities":"/docs/api-reference/utilities","../../api-reference/spherical-coordinates.md":"/docs/api-reference/spherical-coordinates","docs/api-reference/spherical-coordinates.md":"/docs/api-reference/spherical-coordinates","../../api-reference/spherical-coordinates":"/docs/api-reference/spherical-coordinates","docs/api-reference/spherical-coordinates":"/docs/api-reference/spherical-coordinates","../../wip/features.md":"/docs/wip/features","docs/wip/features.md":"/docs/wip/features","../../wip/features":"/docs/wip/features","docs/wip/features":"/docs/wip/features","../rotations.md":"/docs/developer-guide/rotations","docs/developer-guide/rotations.md":"/docs/developer-guide/rotations","../rotations":"/docs/developer-guide/rotations","docs/developer-guide/rotations":"/docs/developer-guide/rotations","../../api-reference/math-array.md":"/docs/api-reference/math-array","docs/api-reference/math-array.md":"/docs/api-reference/math-array","../../api-reference/math-array":"/docs/api-reference/math-array","docs/api-reference/math-array":"/docs/api-reference/math-array","../../api-reference/vector2.md":"/docs/api-reference/vector2","docs/api-reference/vector2.md":"/docs/api-reference/vector2","../../api-reference/vector2":"/docs/api-reference/vector2","docs/api-reference/vector2":"/docs/api-reference/vector2","../floating-point.md":"/docs/developer-guide/floating-point","docs/developer-guide/floating-point.md":"/docs/developer-guide/floating-point","../floating-point":"/docs/developer-guide/floating-point","docs/developer-guide/floating-point":"/docs/developer-guide/floating-point","../../api-reference/addons/polygon.md":"/docs/api-reference/addons/polygon","docs/api-reference/addons/polygon.md":"/docs/api-reference/addons/polygon","../../api-reference/addons/polygon":"/docs/api-reference/addons/polygon","docs/api-reference/addons/polygon":"/docs/api-reference/addons/polygon","../../api-reference/vector4.md":"/docs/api-reference/vector4","docs/api-reference/vector4.md":"/docs/api-reference/vector4","../../api-reference/vector4":"/docs/api-reference/vector4","docs/api-reference/vector4":"/docs/api-reference/vector4","../../api-reference/vector3.md":"/docs/api-reference/vector3","docs/api-reference/vector3.md":"/docs/api-reference/vector3","../../api-reference/vector3":"/docs/api-reference/vector3","docs/api-reference/vector3":"/docs/api-reference/vector3","../../api-reference/matrix4.md":"/docs/api-reference/matrix4","docs/api-reference/matrix4.md":"/docs/api-reference/matrix4","../../api-reference/matrix4":"/docs/api-reference/matrix4","docs/api-reference/matrix4":"/docs/api-reference/matrix4"},"slug":"docs/developer-guide/performance","toc":"docs"}}